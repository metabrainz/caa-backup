# Cover Art Archive Backup

This code was mostly generated by Gemini AI. Good job on such a simple and tedious task, buddy!

This projects exists to backup the Cover Art Archive's original sized pieces of cover art.


---

## Getting Started

### Prerequisites

To run this project, you'll need the following installed:

* **Python 3.x**

* Access to a **MusicBrainz PostgreSQL database** to run the importer.

* The project dependencies, which can be installed with `pip`.

### Installation

1. Clone this repository or place the three Python files (`store.py`, `caa_importer.py`, and `caa_downloader.py`) in the same directory.

2. Install the required Python packages by running the following command:

```

pip install peewee psycopg2-binary tqdm click python-dotenv requests

```

## Configuration

The project uses a `.env` file to manage all configuration settings. Create a file named `.env` in the root directory of the project and add the following variables:

```

# PostgreSQL connection string for the MusicBrainz database.

# Replace the values with your database credentials.

# Example: "postgresql://user:password@host:port/database"

PG\_CONN\_STRING="your\_postgres\_connection\_string"

# Path to the local SQLite database file.

# This file will be created automatically if it doesn't exist.

DB\_PATH="caa\_backup.db"

# Root directory where the downloaded cover art images will be cached.

CACHE\_DIR="cache"

# Number of threads to use for concurrent downloads. The default is 8.

# Adjust this value based on your network speed and system resources.

DOWNLOAD\_THREADS=8

```

## Usage

The project is split into two main steps: importing and downloading.

### 1. Import Records with `caa_importer.py`

This script connects to your PostgreSQL database, queries the IDs and metadata for all available cover art, and saves them to the local SQLite data store (`caa_backup.db`).

* To run the importer, execute the following command:

```

python caa\_importer.py

```

* The script will print its progress and the total number of records imported.

### 2. Download Images with `caa_downloader.py`

Once the local data store is populated, this script downloads the full-resolution cover art images. It uses a multithreaded approach with the number of threads specified in your `.env` file.

* To start the downloader, run:

```

python caa\_downloader.py

```

* The script will display a progress bar showing the download status.

## Project Structure

* `store.py`: Defines the `CAABackupDataStore` class and the `CAABackup` model for the SQLite database. It handles all database operations.

* `caa_importer.py`: Imports record metadata from a PostgreSQL database into the local data store.

* `caa_downloader.py`: Downloads the images from the Cover Art Archive and saves them to the specified cache directory.
```
