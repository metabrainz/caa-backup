# Cover Art Archive Backup

This code was mostly generated by Gemini AI. Good job on such a simple and tedious task, buddy!

This projects exists to backup the Cover Art Archive's original sized pieces of cover art.


## Getting Started

Create a virtual env and install the python3 pre-requisites:

```
python -mvenv .ve
source .ve/bin/activate
pip install -r requirements.txt
```

Now copy dot-env-sample to .env:
```
cp dot-env-sample .env
```

Then edit .env according to your needs:

PG_CONN_STRING -- the postgres connection string for access to a MusicBrainz database
DB_PATH="caa_backup.db" -- the location where to store the local database file to keep track of progress.
CACHE_DIR="caa-backup" -- the cache directory where to store the downloaded files
DOWNLOAD_THREADS=12 -- the number of threads to use for simulteanous downloads

## Running

First, run caa_imorter.py to download the cover_art_archive.cover_art table into SQLite.

Then, run caa_downloader.py to download the cover art images. This is going to take DAYS, if not WEEKS!

Finally, run caa_verify.py to reset all the download statuses in the DB, check the local filesystem,
and then mark all local files as downloaded. This step should be repeat once the downloader finishes
to try and re-try all images that were not downloaded.

To start the process over again
