# Cover Art Archive Backup

This code was mostly generated by Gemini AI. Good job on such a simple and tedious task, buddy!

This projects exists to backup the Cover Art Archive's original sized pieces of cover art.


## Getting Started

Create a virtual env and install the python3 pre-requisites:

```
python -mvenv .ve
source .ve/bin/activate
pip install -r requirements.txt
```

Now copy dot-env-sample to .env:
```
cp dot-env-sample .env
```

Then edit .env according to your needs:

* PG_CONN_STRING -- the postgres connection string for access to a MusicBrainz database
* DB_PATH="caa_backup.db" -- the location where to store the local database file to keep track of progress.
* BACKUP_DIR="caa-backup" -- the cache directory where to store the downloaded files
* DOWNLOAD_THREADS=12 -- the number of threads to use for simulteanous downloads

## First run

Run caa_importer.py to download the cover_art_archive.cover_art table into SQLite.

Then, run caa_downloader.py to download the cover art images. This is going to take DAYS, if not WEEKS!


## Subsequent runs

To keep the backup up-to-date run the caa_importer.py script again to re-download all the CAA data, 
then re-run caa_verify.py to mark all the downloaded files as downloaded. Finally, run caa_downloader.py
again to download any new files that were added since the last run.

